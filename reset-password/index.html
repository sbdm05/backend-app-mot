<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- ionic library -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
  <title>Document</title>
</head>
<body>
  <h1>Test</h1>

  <form>
    <ion-input type='text' placeholder='Votre nouveau mot de passe'></ion-input>

  </form>

  <script>

      const queryString = window.location.search;
      console.log(queryString);

      const urlParams = new URLSearchParams(queryString);

      const id = urlParams.get('id')
      console.log(id);


      const token = urlParams.get('token')
      console.log(token);

      const URL = 'https://guarded-fortress-84785.herokuapp.com'


      // verify token
      // on essaye de récupérer le user
      const verifyToken = async (id, token)=>{
        const options = {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json;charset=UTF-8'
          },
          body: JSON.stringify({
            id: id,
            token: token
          })
        };
        const response = await fetch(`${URL}/api/v1/letters/reset-password`, options)
        console.log(response);
        const responseJS = await response.json()
        console.log(responseJS)
      }

      verifyToken(id, token)

      // maintenant on peut faire la suite :
      // take new value et faire un appel pour enregistrer le nouveau mot de passe.



  </script>
</body>
</html>
